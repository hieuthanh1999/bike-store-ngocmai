<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: html_head"/>

<body>
  <!-- container section start -->
  <section id="container" class="">
   <header th:replace="fragments :: bar" ></header>
	<aside th:replace="fragments :: menu"></aside>
    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <div class="row">
          <div class="col-lg-12">
            <h3 class="page-header" style="font-family: arial; color: #007aff"><i class="fa fa-files-o"></i> Sửa đơn hàng</h3>
            <ol class="breadcrumb" style="font-family: arial;">
              <li><a th:href="@{/admin}">Trang chủ</a></li>
              <li>Đơn hàng</li>
              <li>Sửa đơn hàng</li>
            </ol>
          </div>
        </div>
        <!-- Form validations -->
        <div class="row">
          <div class="col-lg-12">
            <section class="panel">
              <div class="panel-body">
                <div class="form">
                  <form class="form-validate form-horizontal" action="#"  th:action="@{/admin/order/save}" th:object="${order}" method="post">
                    <div class="form-group ">
                      <label for="id" class="control-label col-lg-2" style="font-family: arial;">Mã đơn hàng <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{id}" readonly="readonly" class="form-control" id="id" name="id" minlength="5" type="text" required  />
                      </div>
                    </div>
                    <div class="form-group ">
                      <label for="fullname" class="control-label col-lg-2" style="font-family: arial;">Tên khách hàng <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{fullname}" class="form-control" id="fullname" name="fullname" minlength="5" type="text" required  />
                      </div>
                    </div> 
                    <div class="form-group ">
                      <label for="phone" class="control-label col-lg-2" style="font-family: arial;">Số điện thoại <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{phone}" class="form-control" id="phone" name="phone" minlength="5" type="text" required  />
                      </div>
                    </div>
                     <div class="form-group ">
                      <label for="address" class="control-label col-lg-2" style="font-family: arial;">Địa chỉ<span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{address}" class="form-control" id="address" name="address" minlength="5" type="text" required  />
                      </div>
                    </div>
                     <div class="form-group ">
                      <label for="email" class="control-label col-lg-2" style="font-family: arial;">Email <span class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{email}" class="form-control" id="email" name="email" minlength="5" type="text" required  />
                      </div>
                    </div>
                    <div class="form-group ">
                      <label for="" class="control-label col-lg-2" style="font-family: arial;">Trạng thái<span class="required">*</span></label>
                      <div class="col-lg-10">
                        <select class="form-control m-bot15" th:field="*{status}" required>
                       		<option  value="Đang chờ">Đang chờ</option>
                       		<option  value = "Đã xác nhận">Đã xác nhận</option>
                     		<option value = "Đang đóng gói">Đang đóng gói</option>
                     		<option value="Đang vận chuyển">Đang vận chuyển</option>
                     		<option value = "Đã thanh toán">Đã thanh toán</option>
                     		<option value = "Đã hủy">Đã hủy</option>
                     		<option value = "Hoàn thành">Hoàn thành</option>
                       		
                     	</select>
                      </div>
                    </div>
                        <div class="form-group ">
                      <label for="" class="control-label col-lg-2" style="font-family: arial;">Phương thức thanh toán<span class="required">*</span></label>
                      <div class="col-lg-10">
                        <select class="form-control m-bot15" th:field="*{methodpayment}" required>
                       			<option value = "Thanh toán khi nhận hàng" style="font-family: arial;">Thanh toán khi nhận hàng</option>
                       			<option value = "Thanh toán chuyển khoản" style="font-family: arial;">Thanh toán chuyển khoản</option>
                     	</select>
                      </div>
                    </div>
                     <div class="form-group ">
                      <label for="" class="control-label col-lg-2" style="font-family: arial;">Tổng tiền<san class="required">*</span></label>
                      <div class="col-lg-10">
                        <input th:field="*{amount}" class="form-control" id="detail" name="detail" minlength="5" type="number" required readonly />
                      </div>
                    </div>
                    <input type="hidden" th:field="*{oncreate}">
                 	<input type="hidden" th:field="*{amountp}">
                 	<input type="hidden" th:field="*{userid}">
                    	<section class="panel">
							

							<table class="table table-striped table-advance table-hover"
								style="font-family: arial;">
								<tbody>
									<tr>
										<th style="text-align: center;">ID</th>
										<th style="text-align: center;">Tên sản phẩm</th>
										<th style="text-align: center;">Ảnh</th>
										<th style="text-align: center;">Số lượng</th>
										<th style="text-align: center;">Giá</th>
										<th></th>
									</tr>
									<tr th:each="c : ${list}" style="text-align: center;">
										<td th:text="${c.id}"></td>
										<td th:text="${c.product.name}"></td>
										<td><img th:src="@{${c.product.img}}"
											alt="" style="height: 40px; width: 40px;"></td>
										<td th:text="${c.amount}"></td>
										<td th:text="${c.product.price}"></td>
										<td>
											<div class="btn-group">
												
												<a class="btn btn-danger" onclick="if(!confirm('Bạn có chắc chắn muốn xóa'))" th:href="@{'/admin/deleteorderdetail/' +${c.id}}">Xóa</a>
											</div>
										</td>
										
									</tr>
								</tbody>
							</table>
						</section>
                    <div class="form-group">
                      <div class="col-lg-offset-2 col-lg-10">
                        <button class="btn btn-primary" style="font-family: arial;" type="submit">Cập nhật</button>
                      </div>
                    </div>
                  </form>
                </div>

              </div>
            </section>
          </div>
        </div>
        <!-- page end-->
      </section>
    </section>
    <!--main content end-->
   
  </section>
  <!-- container section end -->

 
<script type="text/javascript">
	$(document).ready(function(){
		$('#fileImage').change(function(){
			showImageThumbnail(this);
		});
	});
	
	function showImageThumbnail(fileInput){
		file = fileInput.files[0];
		reader = new FileReader();
		reader.onload = function(e){
			$('#thumbnail').attr('src',e.target.result);
		};
		reader.readAsDataURL(file);
	}
	
</script>

</body>

</html>
